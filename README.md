# PT文件转存115网盘工具

## 项目简介
该工具旨在解决运营商对用户上传带宽日益限制的问题。当需要将从PT站点下载的文件转存到115网盘时，传统上传方式会占用用户自身的上传带宽，而本工具通过调用115网盘的秒传接口实现文件快速转存，若秒传失败则自动休眠一段时间后重试，从而避免用户进行首次上传（首传），最大程度节省上传带宽资源。


## 核心功能
1. **秒传机制**：优先调用115网盘秒传接口，直接基于文件哈希信息完成转存，无需实际上传文件内容
2. **智能重试**：当秒传失败时，自动休眠一段时间后重新尝试秒传，提高转存成功率
3. **带宽节省**：通过避免用户执行文件首传，显著减少对本地上传带宽的占用


## 部署方法
使用Docker Compose快速部署，配置如下：

```yaml
version: '3'

services:
  p115client-service:
    image: walkingd/ptto115:latest  # 使用预构建镜像
    container_name: ptto115
    environment:
      # 115网盘身份验证Cookies（需替换为实际值）
      - ENV_115_COOKIES=UID=; CID=; SEID=; KID=     
      # 115网盘目标目录ID（需替换为实际目录ID）
      - ENV_115_UPLOAD_PID=3205381019324771023      
    volumes:
      # 本地PT文件下载目录（左侧）映射到容器内监控目录（右侧）
      - /vol3/1000/Video/MoviePilot/transfer:/app/upload
    restart: always  # 容器退出时自动重启，保证服务持续运行
```


## 注意事项
- 环境变量`ENV_115_COOKIES`需替换为用户本人的115网盘登录Cookies（获取方式：登录115网页版后，通过浏览器开发者工具获取）
- `ENV_115_UPLOAD_PID`需替换为115网盘中目标存储目录的ID（可通过115网页版进入目标目录，从URL中提取）
- 本地映射目录需包含待转存的PT文件，工具会自动监控该目录并处理文件转存
